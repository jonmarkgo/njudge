<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
	<META HTTP-EQUIV="CONTENT-TYPE" CONTENT="text/html; charset=iso-8859-15">
	<TITLE></TITLE>
	<META NAME="GENERATOR" CONTENT="OpenOffice.org 1.1.0  (Linux)">
	<META NAME="CREATED" CONTENT="20030910;23563300">
	<META NAME="CHANGED" CONTENT="20030922;23095200">
	<META NAME="Info 1" CONTENT="Christophe Courtois">
	<STYLE>
	<!--
		@page { size: 21cm 29.7cm }
		H1 { margin-bottom: 0.21cm }
		H1.western { font-family: "Arial", sans-serif; font-size: 16pt }
		H1.cjk { font-size: 16pt }
		H1.ctl { font-size: 16pt }
		P { margin-bottom: 0.21cm }
		P.western { font-family: "Arial", sans-serif; font-size: 12pt; font-weight: medium }
		H2 { margin-left: 1cm }
		H2.western { font-family: "Arial", sans-serif; font-size: 14pt }
		H2.cjk { font-size: 16pt }
		H2.ctl { font-size: 16pt }
	-->
	</STYLE>
</HEAD>
<BODY LANG="en-US" DIR="LTR">
<P CLASS="western" ALIGN=CENTER STYLE="margin-top: 0.42cm; margin-bottom: 0.5cm; font-weight: medium; page-break-after: avoid">
<FONT FACE="Albany, sans-serif"><FONT SIZE=5 STYLE="font-size: 20pt">Description
of e-mail format of Diplomacy electronic Judges</FONT></FONT></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Version 0.1-0.2 Christophe Courtois - September
2003</P>
<P CLASS="western"><BR><BR>
</P>
<H1 CLASS="western">Introduction</H1>
<P CLASS="western">This document describes the output format of <I>the
njudge Diplomacy adjudicator.</I></P>
<P CLASS="western"><FONT COLOR="#ff0000"><I>WARNING : </I>This is
work in progress; please report any mistake, incoherence, gap...</FONT></P>
<P CLASS="western"><BR><BR>
</P>
<OL>
	<LI><H1 CLASS="western">Goals and conventions</H1>
</OL>
<OL>
	<LI><P CLASS="western">Describe the current e-mail format to make
	compatibility between the judge and the tools which use its output
	easier.</P>
	<LI><P CLASS="western">Help the next versions of the judge to be
	fully compatible with the previous versions (compatibility mode).</P>
	<LI><P CLASS="western">Describe the enhancements to this format in
	the new versions of njudge or other judges.</P>
</OL>
<P CLASS="western">If not specified otherwise, all information there
is given for all judges and must be accepted by all clients.</P>
<P CLASS="western"><BR><BR>
</P>
<OL START=2>
	<LI><H1 CLASS="western">Existing e-mail types</H1>
</OL>
<P CLASS="western">The following e-mails can be sent by the judge.
Not everything is covered in this document. If an e-mail type is not
listed here, or not described, or not precisely enough, and a some
tool depend on it, please tell me (christophe@courtois.cc).</P>
<UL>
	<UL>
		<UL>
			<LI><P CLASS="western">Power is selected</P>
			<LI><P CLASS="western">Take-over of abandoned powers</P>
			<LI><P CLASS="western">Signons of other players</P>
			<LI><P CLASS="western">Bad signon</P>
			<LI><P CLASS="western">Game starts</P>
			<LI><P CLASS="western">Press to players</P>
			<LI><P CLASS="western">Results of turns</P>
			<LI><P CLASS="western">Player(s) is/are late or abandoned</P>
			<LI><P CLASS="western">Parameters of the game</P>
			<LI><P CLASS="western">Administrative e-mails about options change</P>
			<LI><P CLASS="western">End of games</P>
			<LI><P CLASS="western">Summary</P>
			<LI><P CLASS="western">History</P>
			<LI><P CLASS="western">Version</P>
			<LI><P CLASS="western"><FONT COLOR="#ff0000">TO BE COMPLETED </FONT>
			</P>
		</UL>
	</UL>
</UL>
<P CLASS="western"><BR><BR>
</P>
<OL START=3>
	<LI><H1 CLASS="western">General rules of all e-mails from the judge</H1>
</OL>
<H2 CLASS="western"><FONT SIZE=4>Parts of the e-mail to use</FONT></H2>
<P CLASS="western">Technical headers of the e-mail must NOT be used
for processing. 
</P>
<P CLASS="western">Attachments must not be used for e-mails sent to
players.</P>
<P CLASS="western">Only following parts have some meaning and may
contain information for the judge:</P>
<UL>
	<UL>
		<LI><P CLASS="western">the From: (for returning the e-mail, if
		Resent or Reply-To not there), 
		</P>
		<LI><P CLASS="western">the Reply-To: (optional, for returning the
		e-mail, if Resent not there)</P>
		<LI><P CLASS="western">the Resent: (optional, for returning the
		e-mail)</P>
		<LI><P CLASS="western">the body.</P>
	</UL>
</UL>
<H2 CLASS="western">Charset 
</H2>
<P CLASS="western">The e-mail informations are pure text.</P>
<P CLASS="western">Some judges may sent the e-mails with a defined
charset (usually ISO-8859-1 or ISO8859-2) to preserve national
characters in the player's messages, the header and the footer, but
the judge itself writes pure ASCII English.</P>
<P CLASS="western"><I>(ISO-8859-15 would be possible for Western
Europe, but some obsolete software would default to ASCII instead of
ISO-8859-1). </I>
</P>
<H2 CLASS="western">Subject</H2>
<P CLASS="western">The subject of the e-mail has often changed in
recent njudges. It must not be taken into account by the judge, and
is only for human use.</P>
<H2 CLASS="western">Judge header</H2>
<P CLASS="western">The judge may add a header at the beginning of the
e-mail, whose text and size is totally free. It can potentially
contain some informations which could fool parsers...</P>
<H2 CLASS="western">Judge footer</H2>
<P CLASS="western">The judge may add a footer at the end of the
e-mail, with the same provisions as the header.</P>
<P CLASS="western"><BR><BR>
</P>
<OL START=4>
	<LI><H1 CLASS="western">Judge and game identification (message
	header)</H1>
	<P CLASS="western">This part is present in many e-mails (in fact,
	most that mapping tools need). 
	</P>
	<P CLASS="western">This part is managed by the <FONT FACE="Courier, monospace">msg_header</FONT>
	function in <FONT FACE="Courier, monospace">mail.c</FONT> in the
	njudge code.</P>
</OL>
<UL>
	<LI><P CLASS="western">Each line begins by twice two dots (<FONT FACE="Courier New">::</FONT>),
	followed by a blank space.</P>
	<LI><P CLASS="western">First line :</P>
	<UL>
		<LI><P CLASS="western">'<FONT FACE="Courier New">Judge: </FONT>' [7
		characters, space included]</P>
		<LI><P CLASS="western">The code of the judge [4 letters] [<FONT COLOR="#ff0000">TO
		SOLVE : Why only 4 letters ? Does not seem hardcoded anyway. Always
		uppercase ??</FONT>], 
		</P>
		<LI><P CLASS="western">Followed by two spaces.</P>
		<LI><P CLASS="western">Only if the player is signed onto a game:</P>
		<UL>
			<LI><P CLASS="western">'<FONT FACE="Courier New">Game: </FONT>' [6
			characters, space included]</P>
			<LI><P CLASS="western">The name of the current game, with the
			first letter uppercase.</P>
			<LI><P CLASS="western">Followed by two spaces.</P>
			<LI><P CLASS="western">'<FONT FACE="Courier New">Variant: </FONT>'
			[9 characters, space included]</P>
			<LI><P CLASS="western">First, the variant name ('Standard',
			'Modern'...), with the first letter uppercase, 
			</P>
			<LI><P CLASS="western">followed by a space</P>
			<LI><P CLASS="western">if available, and by the variant modifier
			(Gunboat, Blind, AF_Rules, Shorthand, Wings at least 1.0-1.5.x
			njudge) [<FONT COLOR="#ff0000">TO SOLVE : confirm for &lt;1.0
			judges</FONT>]</P>
		</UL>
		<LI><P CLASS="western">End of first line</P>
	</UL>
	<LI><P CLASS="western">Second line (only if the player is signed
	onto a game: 
	</P>
	<UL>
		<LI><P CLASS="western">'<FONT FACE="Courier New">Deadline: </FONT>'
		[10 characters, space included]</P>
		<LI><P CLASS="western">Phase of the game [<FONT COLOR="#ff0000">TO
		SOLVE: see exact format and allowed length</FONT>]</P>
		<LI><P CLASS="western">followed by a space</P>
		<LI><P CLASS="western">Deadline date as given by the <FONT FACE="Courier New">ptime
		</FONT>function, in English (code in <FONT FACE="Courier New">jm.c</FONT>).
				</P>
		<UL>
			<LI><P CLASS="western">If the deadline is not yet known (game has
			not started), it is by default at 00:00:00, Jan. 1<SUP>st</SUP>
			1970 (judge timezone time)</P>
			<LI><P CLASS="western">Following fields are separated by a space:</P>
			<UL>
				<LI><P CLASS="western">Day of week (3 letters, lowercase with
				first uppercase)</P>
				<LI><P CLASS="western">Month (3 letters, lowercase with first
				uppercase)</P>
				<LI><P CLASS="western">Day number (2 digits with leading zero if
				necessary)</P>
				<LI><P CLASS="western">Year (4 digits)</P>
				<LI><P CLASS="western">Time/minutes/seconds (as HH:MM:SS, with
				hours from 00 to 24)</P>
				<LI><P CLASS="western">Timezone of the judge location (+ ou &ndash;
				and 4 digits)</P>
			</UL>
		</UL>
	</UL>
	<LI><P CLASS="western">Other lines are optional. Known and totally
	optional uses are:</P>
	<UL>
		<LI><P CLASS="western">Map line for a web link (judge FROG)</P>
		<LI><P CLASS="western"><FONT COLOR="#ff0000">OTHERS? </FONT>
		</P>
	</UL>
</UL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">Examples :</P>
<PRE>:: Judge: FROG Game: S1b6p2 Variant: Standard Gunboat
:: Deadline: S1901M Thu Jan 01 1970 01:00:00 +0100 

:: Judge: FROG Game: S3b7p1 Variant: Standard Gunboat
:: Deadline: F1906B Thu Sep 04 2003 23:30:00 +0200 
:: Map: <A HREF="http://frog.born2play.org/~observer/cartes.php3?Partie=s3b7p1">http://frog.born2play.org/~observer/cartes.php3?Partie=s3b7p1</A>

:: Judge: ALEX Game: Test Variant: Standard
:: Deadline: S1901M Fri May 09 2003 23:30:00 +0200 </PRE><P CLASS="western">
<BR><BR>
</P>
<OL START=5>
	<LI><H1 CLASS="western">Power is selected</H1>
</OL>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western">This is the e-mail that a player receives when he
successfully subscribed to a game. Parts are:</P>
<UL>
	<UL>
		<LI><P CLASS="western">Message header as described above</P>
		<LI><P CLASS="western">Empty line</P>
		<LI><P CLASS="western">Message &ldquo;You've been selected to play
		a power in game &ldquo; and the game name (lowercase) between
		quotation marks.</P>
		<LI><P CLASS="western">If the game can't start immediately:</P>
		<UL>
			<LI><P CLASS="western">A line &ldquo;You'll be notified when N
			more players sign on.&rdquo;, where N is the number of missing
			players.</P>
			<LI><P CLASS="western">A line &ldquo;Game 'xxxx' now has M
			players.', where xxxx is the full (lowercase) game name, and M the
			already subscribed players.</P>
		</UL>
		<LI><P CLASS="western"><FONT COLOR="#ff0000">TO DO if this is
		important: preference list management, what happens if the game
		could start now, or effectively starts.</FONT></P>
	</UL>
</UL>
<P CLASS="western">Example (header and footer suppressed) :</P>
<PRE>:: Judge: FROG Game: S1b6p2 Variant: Standard Gunboat
:: Deadline: S1901M Thu Jan 01 1970 01:00:00 +0100 

You've been selected to play a power in game 's1b6p2'.
You'll be notified when 6 more players sign on.
Game 's1b6p2' now has 1 player.

Preference list 'FTGIEA' set.</PRE><P CLASS="western">
<BR><BR>
</P>
<OL START=6>
	<LI><H1 CLASS="western">Game starts</H1>
</OL>
<P CLASS="western">This is the e-mail that all players receive when
enough players have subscribed, and the judge or the master starts
the game.</P>
<P CLASS="western"><FONT COLOR="#ff0000">TO BE CONTINUED...</FONT></P>
<P CLASS="western"><BR><BR>
</P>
<P CLASS="western"><BR><BR>
</P>
<OL START=6>
	<LI><H1 CLASS="western">Other e-mails</H1>
</OL>
<P CLASS="western"><BR><BR>
</P>
<OL START=7>
	<LI><H1 CLASS="western">Open points</H1>
</OL>
<UL>
	<LI><P CLASS="western"><FONT COLOR="#ff0000">Footer format ?</FONT></P>
	<LI><P CLASS="western"><FONT COLOR="#ff0000">Always ASCII ???? =&gt;
	Was charset always ASCII ? </FONT>
	</P>
	<LI><P CLASS="western"><FONT COLOR="#ff0000">Machiavelli ???</FONT></P>
	<LI><P CLASS="western">DEDO : translated messages ??? =&gt; English
	compatibility mode</P>
	<LI><P CLASS="western"></P>
</UL>
<OL START=8>
	<LI><H1 CLASS="western">Comments</H1>
	<LI><H1 CLASS="western">Ideas and suggestions for the future</H1>
</OL>
<P CLASS="western"><BR><BR>
</P>
<OL START=10>
	<LI><H1 CLASS="western">Boring stuff</H1>
</OL>
<P CLASS="western">This document was made by Christophe Courtois and
is part of the njudge program. 
</P>
<P CLASS="western">Verbatim and explicitly enhanced versions can be
freely redistributed.</P>
<P CLASS="western"><BR><BR>
</P>
</BODY>
</HTML>