<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head lang=en>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-15">
        <meta name="Description" content="Diplomacy Judge variants HOWTO">
        <meta name="GENERATOR" content="mimine">
        <meta name="Author" content="Christophe COURTOIS">
        <meta name="copyright" content="Christophe Courtois 2003">
        <meta name="KeyWords" content="Diplomacy,njudge,variants">
        <meta name="MSSmartTagsPreventParsing" content="TRUE">
        <meta name="revisit-after" content="15 days">
        <meta name="robots" content="FOLLOW">
        <meta name="distribution" content="Global">
        <meta name="rating" content="Safe For Kids">
        <meta http-equiv="reply-to" content="christophe@courtois.cc">
        <meta name="language" content="English">
        <meta name="doc-rights" content="Copywritten Work">
        <title>Diplomacy Judge variants HOWTO</title>
</head>
<body>

<h1 align=center>Creating variants for the Diplomacy judge</h1>

<p align=center>v.0.2
<br><a href="mailto:christophe@courtois.cc">Christophe Courtois (christophe@courtois.cc)</a>


<hr>
<table align=center width="80%" summary="Summary"><tr valign=top><td>
<small>
<a href="#1">1 Introduction</a>
<br><a href="#1.1">1.1 History</a>
<br><a href="#1.2">1.2 Last version</a>
<br><a href="#1.3">1.3 Why?</a>
<br><a href="#2">2 What you can and must do</a>
<br><a href="#2.1">2.1 Possibilities</a>
<br><a href="#2.3.">2.3. Variant options</a>
<br><a href="#3">3 Data to provide</a>
<br><a href="#3.1.">3.1. Map files</a>
<br><a href="#3.1.1">3.1.1 Declaration of lands and centers</a>
<br><a href="#3.1.2">3.1.2 Movements</a>
<br><a href="#3.1.3">3.1.3 ordering for summaries (optional)</a>
<br><a href="#3.1.4">3.1.4 Other optional data</a>
<br><a href="#3.2">3.2 Seed file</a>
<br><a href="#3.2.1">3.2.1 Seed file format</a>
<br><a href="#3.2.2">3.2.2 When units do not begin on home centers</a>
<br><a href="#3.2.3">3.2.3 Special seed files (seed_b, seed_w...)</a>
<br><a href="#3.2.4">3.2.4 In the code</a>
<br><a href="#3.3">3.3 Info files</a>
<br><a href="#3.4">3.4 Variant.h</a>
</small></td><td><small>
<br><a href="#4">4 Examples</a>
<br><a href="#4.1">4.1 H32 (Hundred) Wings</a>
<br><a href="#4.2">4.2 Fleet in Marseille</a>
<br><a href="#4.3">4.3 Switzerland</a>
<br><a href="#4.4">4.4 Chess</a>
<br><a href="#5">5 floc.net</a>
<br><a href="#6">6 Mapmaker</a>
<br><a href="#7">7 Addmap</a>
<br><a href="#8">8 Automatic tests</a>
<br><a href="#9">9 Troubleshooting</a>
<br><a href="#10">10 Integration in the official judge source</a>
<br><a href="#11">11 Moving variants between judges</a>
<br><a href="#12">12 Misc</a>
<br><a href="#12.1">12.1 The author</a>
<br><a href="#12.2">12.2 Thanks</a>
<br><a href="#12.3">12.3 Copyright and boring stuff</a>
<br><a href="#"></a>

</small>
</td></tr></table>
<hr>

<h1><a name="1">1 Introduction</a></h1>

<h2><a name="1.1">1.1 History</a></h2>

<p>- 0.2 : Mar-Apr 2003

<h2><a name="1.2">1.2 Last version</a></h2>

<p> This is a guide which aims to help people creating variants for the Diplomacy judge.

<br>The reference version is the HTML version.  The text should be
automatically generated against the HTML.
<br>Anyway, the last version of this file should always be in the last CVS
snapshot of the judge at <a href="http://www.njudge.org/">http://www.njudge.org/</a>.

<h2><a name="1.3">1.3 Why?</a></h2>

<p> There seems to lack documentation on how to make a variant.
<a href="http://www.ellought.demon.co.uk/">David Norman</a> provides some useful help but I think
that many things shoudn't need to go through him now that everyone can have a judge at home.

<p> I'll try to sum up here most knowledge on variants creation, beginning by the basic
ones, made from existing maps.  I won't cover variants with new rules not yet implemented in the judge.

<h1><a name="2">2 What you can and must do</a></h1>

<h2><a name="2.1">2.1 Possibilities</a></h2>

<p> Trivial "almost-variants" without recompilation needed are:
<ul type=square>
<li> Add maps for wings or blind options to existing variants (see <a href="#2.2.3">Special seed files</a>).
</li>
<li> Change start units positions of existing variants (see <a href="#2">Seed files</a>),
but it will not be compatible with the 'official' set of variants.
</li>
</ul>

<p> Easy variants covered here are:
<ul type=square>
<li> Variants with an existing map slightly modified</li>
<li> Variants with a simple map</li>
<li> Variants with new powers</li>
</ul>

<p> A bit more difficult, which will lead you to use MapMaker and perhaps contacting David Norman:
<ul type=square>
<li> Variants with totally new and complex maps</li>
</ul>

<p> You'll have to understand the code of the judge yourself for changing any rule...

<p> And creating the map files and pictures if currently out of subject.

<h2><a name="2.3">2.3. Variant options</a></h2>

<p> There are variants based on maps, like <tt>standard, modern, h32</tt>... , and there are the variant
options or modifiers: <tt>Wings, Gunboat, Blind, Shorthand</tt>. See the <tt>info</tt> file for each of
them, but basically <tt>Shorthand</tt> and <tt>Gunboat</tt> only affect press, while <tt>Blind</tt> and
<tt>Wings</tt> may have impact on map files.


<h1><a name="3">3 Data to provide</a></h1>

<p> For a complete new variant, you MUST provide this:
<ul type=square>
<li> <b>Map file</b>: this lists the territories, the way they communicate with each other, the order
which must be used in summary reports.
<br>Example: <tt>data/map, data/map.loeb9</tt>
</li>
<li> <b>Seed file</b> : this lists the units beginning positions and what are the home centers.
<br>Example: <tt>data/seed.1</tt>
</li>
<li> <b>Report file</b> : this file is sent at game start, giving the initial positions.
<br><br>Example: <tt>data/report.38</tt>
</li>
</ul>

<p> You MUST modify theses files in the source code of the judge:
<ul type=square>
<li> <tt>variant.h</tt></li>
<li> <tt>variant.c</tt></li>
</ul>

<p> And you MAY provide these files, but the judge will work without them.  They will be necessary
for the players though.
<ul type=square>
<li> <b>Info file</b>: It contains the differences between the standard game and the variant.
<br>Example: <tt>data/info.wings, data/info.h32</tt>
</li>
<li> <b>Rules file</b>: Only if you create a whole new game.
<br>Example: <tt>data/rules.machiavelli</tt>
</li>
</ul>

<p> There are some additional files to modify to package a new variant into the official judge, see later.


<h2><a name="3.1">3.1. Map files</a></h2>

<p> A map file is in the <tt>data/</tt> subdirectory.  The name is <tt>map.&lt;<i>variant_name</i>&gt;.

<p> The format is fully described by a document from Sergio Lidsell that is part of the judge package:
<a href="njudgemapdatahowto.htm">njudgemapdatahowto.htm</a>.  Following are juste examples from the
standard map to sum it up.

<h3><a name="3.1.1">3.1.1 Declaration of lands and centers</a></h3>
<table cellpadding=3>
<tr><td><tt>Switzerland,</tt><br>(Neutral land)<td><tt>l  swi switz swiss</tt><br>(Possible names)
<tr><td><tt>Adriatic Sea,</tt><br>(Sea)<td><tt>w  adr adriatic
<tr><td><tt>Ankara,</tt><br>(Home center of T)<td><tt>T  ank ankar
<tr><td><tt>Belgium,</tt><br>(Neutral center with sea shore)<td><tt>xw  bel belgi
</table>

<h3><a name="3.1.2">3.1.2 Movements</a></h3>

<table cellpadding=3>
<tr><td><tt>swi-mv:</tt><br>(Switzerland, no possible move)<td><tt>swi</tt><br>&nbsp;
<tr><td><tt>adr-xc:</tt><br>(Between a coast and its neighbours)<td><tt>alb apu ven tri ion</tt><br>&nbsp;
<tr><td><tt>bud-mv:</tt><br>(Between a land and its neighbours)<td><tt>vie gal rum ser tri</tt><br>&nbsp;
<tr><td><tt>con-mv:<br>con-xc:</tt>
<br>(Special case for Constantinophe)<td><tt>bul ank smy<br>bul/sc bul/ec bla ank smy aeg</tt><br>&nbsp;
</table>

<h3><a name="3.1.3">3.1.3 ordering for summaries (optional)</a></h3>

<p><tt>Center order for summary report:
<br>&nbsp;&nbsp;ven rom nap tun edi lon lvp bre par mar por spa bel hol mun kie ber
<br>&nbsp;&nbsp;den swe nor stp war mos sev con ank smy bul rum gre ser bud vie tri
<br>#End of center ordering
</tt>

<h3><a name="3.1.4">3.1.4 Other optional data</a></h3>

<p> Hong Kong flag, railways, and so on, are described in <a href="njudgemapdatahowto.htm">njudgemapdatahowto.htm</a>.
 For a good example, see <tt>map.colonial</tt>.

<h2><a name="3.2">3.2 Seed file</a></h2>

<h3><a name="3.2.1">3.2.1 Seed file format</a></h3>

<p> The seed file is in the <tt>data/</tt> subdirectory.  The name is <tt>seed.&lt;<i>variant_number</i>&gt;.
(The variant number is obtained when modifying the source; see below).

<p> The first line contains the first game season.  This is a redundancy with what is in <tt>variant.c</tt>,
but both sources must give the same value.  If the <tt>seed</tt> file and <tt>variant.c</tt> don't match
on the start season, the judge will crash at the first resolution of orders. (Even if the test disappears
some day, the file format probably won't change to preserve variant files compatibility with <s>obsolete</s> old
judges).
<br> Then follow the positions of the units at the start of the game for each
power, and the centers that each player possess at the beginning.  On the standard map you obtain (file <tt>seed.1</tt>):

<p><tt>S1901M
<br>A: A Budapest
<br>A: A Vienna
<br>A: F Trieste
<br>E: A Liverpool
<br>E: F Edinburgh
<br>...
<br>T: F Ankara
<br>-1 Null ownership/contested record will initialize from the map data.
<br>-1
</tt>

<p> The last line indicates the start position of each power.  In the standard game and most variants,
it is not given, and the home centers are the one occupied by units.

<h3><a name="3.2.2">3.2.2 When units do not begin on home centers</a></h3>

<p> Another example is the seed for the Chaos variant (<tt>seed.5</tt>) :
<p><tt>F1900B
<br>-1
<br>....A....BC..DEF..GH.I....J...K..LN.PQ.RST...U.V..W.X.YZ0..1234.56....78.9..
<br>-1
</tt>

<p> There is no unit at the beginning.  Each character is a territory.  Each dot is one without a unit,
and letters and numbers indicate the power who possess the center at the beginning.  There is no list of
units ready to begin, and the first season is Fall, so the players must begin by building a unit.

<p> For the last version of the Hundred variant, called h32 (<tt>seed.22</tt>) we have:

<p><tt>S1425M
<br>B: A Dijon
<br>B: A Flanders
<br>B: A Luxembourg
<br>B: F Holland
<br>E: A Calais
<br>E: A Guyenne
<br>E: A Normandy
<br>E: F English Channel
<br>E: F London
<br>F: A Dauphine
<br>F: A Orleanais
<br>F: A Paris
<br>F: A Toulouse
<br>F: A Provence
<br>-1
<br>........E...FEB.B.EB..E.B..E..FF.......F.
<br>-1
</tt>

<p> In this seed, France begins with 5 units on the board, but possess only 4 centers, and will have to
gain a center in the first year to avoid to disband a unit.

<h3><a name="3.2.3">3.2.3 Special seed files (seed_b, seed_w...)</a></h3>

<p> There are special seed files for the special variants options (wings, gunboat...).
 For example, a variant with the wings option can have a seed file ending by <tt>_w</tt>.  If
such a file does not exist, the standard seed file is used, and the game begins without any wing units
on the board.  The only
seed file with such a property currently in the source tree is <tt>seed_w.19</tt>, the wings version
of the Modern variant.  It is the same file as <tt>seed.19</tt>, except that some units at the beginning
are planes (see <tt>info.wings</tt>):
<p><tt>B: W London
<br>F: W Bordeaux
</tt>

<p> There is no example of a <tt>seed_b</tt> or <tt>seed_bw</tt> file, although all is in place in the
judge code to use it (it may be removed in the future).  There is little point in having special
seed files for Blind variants...

<h3><a name="3.2.4">3.2.4 In the code</a></h3>

<p> The part of the code responsible for opening the seed file is <tt>ml_signon.c</tt>.  Probably the
place to change for the one who wants to have <tt>seed.&lt;variant&gt;</tt> instead of <tt>seed.&lt;number&gt;</tt>.

<h2><a name="3.3">3.3 Info files</a></h2>

<p> The <tt>info&lt;variant&gt;</tt> contains all informations on your variant: differences against the standard map,
new units or territory, special territories, starting positions and home centers,
default variant modifiers (wings...), supply centers and how many must be won, who made the variant... See
other <tt>info</tt> files as example.
<p> They are useful only for the players, who will get them with <tt>get info.&lt;variant&gt;</tt>.  The
judge itself doesn't need them.

<h2><a name="3.4">3.4 Variant.h</a></h2>

<p> A variant must be declared in this file.  The variant number is set up there.

<h1><a name="4">4 Examples</a></h1>

<h2><a name="4.1">4.1 H32 (Hundred) Wings</a></h2>

<p> H32 (Hundred Years War) with wings seems at first sight stupid, but I think the game would be changed
by it.  We need for this the <tt>seed_w</tt> file to place the first wings, and the <tt>report_w</tt> file
to let it know to the players.  We need just to copy the <tt>seed.22</tt> and <tt>report.22</tt>
as <tt>seed_w.22</tt> and <tt>report_w.22</tt>, and modifying them for example this way:
<ul type=square>
<li><tt>seed_w.22:
<br>B: A Dijon
<br>B: <b>W</b> Flanders
<br>B: A Luxembourg
<br>B: F Holland
<br>E: A Calais
<br>E: A Guyenne
<br>E: A Normandy
<br>E: F English Channel
<br>E: <b>W</b> London
<br>F: A Dauphine
<br>F: A Orleanais
<br>F: A Paris
<br>F: <b>W</b> Toulouse
<br>F: A Provence
</tt>
</li>
<li><tt>report_w.22:
<br>  Starting position for Spring of 1425.
<br>
<br>Burgundy:Army Dijon.
<br>Burgundy:<b>Wing</b> Flanders.
<br>...
<br>France: <b>Wing</b> Toulouse.
<br>France: Army (unpaid and angry) Provence.
</tt>
</li>
</ul>

<h2><a name="4.2">4.2 Fleet in Marseille</a></h2>

<h2><a name="4.3">4.3 Switzerland</a></h2>

<p> Let's imagine that Switzerland is a territory like any other one.

<h2><a name="4.4">4.4 Chess</a></h2>



<p> For this small variant, you don't need anything more.  You can test it immediately:
<p><tt>create ?testh32w password h32 wings
<br>set players 1
</tt>

<h1><a name="5">5 floc.net</a></h1>

<h1><a name="6">6 Mapmaker</a></h1>

<p>
DN :
There are a number of files you need - a map, a report, a seed and an info
file, plus you have to update the variant.h (and variant.c in the newer
versions of the judge).

It can be done without MapMaker. But by using MapMaker :

(1) It takes a fraction of the time
(2) You get Mapper, Mapit and a PS map too
(3) You get floc.net support

And also, you get my experience of getting a variant through draft versions
without confusing the various systems that run around the judges...

<h1><a name="7">7 Addmap</a></h1>

<p>

<h1><a name="8">8 Automatic tests</a></h1>

<p> None known.  David Norman may have some.

<h1><a name="9">9 Troubleshooting</a></h1>

<p>These are some problems and solutions:

<table border=1 cellpadding=3>
<tr><td> * <td> *
</table>

<h1><a name="10">10 Integration in the official judge source</a></h1>

<p> CVS, Makefile.am

<h1><a name="11">11 Moving variants between judges</a></h1>

<p> Numbers ???,



<h1><a name="12">12 Misc</a></h1>

<h2><a name="12.1">12.1 The author</a></h2>

<p> The author is 28 years old, writes SQL all day long for big
corporations to eat and pay the mortgage, and is trying to learn Java, C and PHP
(The most difficult part is to find some time for it...)

<h2><a name="12.2">12.2 Thanks</a></h2>

<p> Many parts of this HowTo are cut-and-pasted from source code and mails of the judge-maint mailing list.

<h2><a name="12.3">12.3 Copyright and boring stuff</a></h2>

<p> Permission is granted to make and distribute copies of this text
provided the copyright notice and this permission notice are preserved on all copies.
<br> Permission is granted to copy and distribute modified versions of this
manual under the conditions for verbatim copying, provided that the
derived work is distributed under the terms of a permission notice
identical to this one. Translations fall under the category of
"modified versions".
<br> Warranty: None. Nothing. Nada. Rien. Que dalle. Nitchevo. Nichts. Do
everything at your own risk. Remember this is a sum-up of a non-native
English speaker on a subject he recently discovered.
<br> Redistribution is allowed and encouraged; however, it is strongly
recommended that the redistributor contact the author before the
redistribution, in the interest of keeping things up-to-date (you could
send me a copy of the thing you're making while you're at it).
<br> Translators are also advised to contact the author before translating
(no translation known for the moment).

<hr>
</div>
</body>
</html>


